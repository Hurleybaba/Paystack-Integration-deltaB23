# Paystack Subscription & Payment Management App

This project is a simple Node.js + Express application that integrates with **Paystack** for managing **plans**, **subscriptions**, **transactions**, and **webhooks**.  
It also includes HTML demo pages for creating, listing, and testing subscriptions and plans.

---

## ğŸš€ Features

- Create and manage **Paystack Plans**
- Create and manage **Subscriptions**
- View **Transactions** with pagination
- Handle **Paystack Webhooks** securely
- Test payments directly from the browser
- Simple HTML front-end for demonstration

---

## ğŸ“‚ Project Structure

project/
â”œâ”€â”€ config/
â”‚ â””â”€â”€ paystackConfig.js # Axios config for Paystack API calls
â”‚
â”œâ”€â”€ controllers/
â”‚ â”œâ”€â”€ paymentController.js # Handles transactions
â”‚ â”œâ”€â”€ planController.js # Handles plan creation and listing
â”‚ â”œâ”€â”€ subscriptionController.js # Handles subscribe/disable actions
â”‚ â””â”€â”€ webhookController.js # Handles Paystack webhook events
â”‚
â”œâ”€â”€ middlewares/
â”‚ â”œâ”€â”€ errorHandler.js # Global error handler
â”‚ â””â”€â”€ validateSignature.js # (Optional) Paystack webhook signature validator
â”‚
â”œâ”€â”€ public/ # Static HTML pages for demonstration
â”‚ â”œâ”€â”€ index.html
â”‚ â”œâ”€â”€ create-plan.html
â”‚ â”œâ”€â”€ list-plans.html
â”‚ â”œâ”€â”€ create-subscription.html
â”‚ â”œâ”€â”€ delete-subscription.html
â”‚ â”œâ”€â”€ list-subscriptions.html
â”‚ â”œâ”€â”€ list-transactions.html
â”‚ â”œâ”€â”€ test-payment.html
â”‚ â”œâ”€â”€ verify-payment.html
â”‚ â”œâ”€â”€ success.html
â”‚ â”œâ”€â”€ failed.html
â”‚ â””â”€â”€ webhook-test.html
â”‚
â”œâ”€â”€ routes/
â”‚ â”œâ”€â”€ paymentRoutes.js
â”‚ â”œâ”€â”€ planRoutes.js
â”‚ â”œâ”€â”€ subscriptionRoutes.js
â”‚ â””â”€â”€ webhookRoutes.js
â”‚
â”‚
â”œâ”€â”€ .env # Environment variables
â”œâ”€â”€ app.js # Express server setup
â”œâ”€â”€ package.json
â””â”€â”€ README.md

## âš™ï¸ Setup Instructions

### 1. Clone and Install

```bash
git clone <repo-url>
cd <repo-folder>
npm install
```

### 2. Clone and Install

PORT=5001
PAYSTACK_SECRET_KEY=sk_test_your_secret_key
PAYSTACK_PUBLIC_KEY=pk_test_your_public_key

### 3. Run the server

```bash
npm start
```

Or for development:

```bash
npx nodemon app.js
```

### 4. Open your browser

```bash
http://localhost:5001
```

## ğŸ” Paystack Webhook Setup

Go to Paystack Dashboard â†’ Settings â†’ API â†’ Webhooks

Set your webhook URL as:

```bash
https://yourdomain.com/api/webhooks/paystack
```

or locally (with a tunneling tool like ngrok):
https://<your-ngrok-id>.ngrok.io/api/webhooks/paystack

Make sure app.use(bodyParser.raw({ type: 'application/json' })) is configured before JSON parsing to verify signatures correctly.
